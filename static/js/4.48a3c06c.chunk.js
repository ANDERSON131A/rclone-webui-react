(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{735:function(e,a,t){"use strict";t.r(a);var n=t(38),c=t(39),s=t(89),r=t(88),o=t(90),l=t(0),i=t.n(l),m=t(419),u=t(137),d=t(87),p=t(714),h=t(440),E=t(441),g=t(442),f=t(715),w=t(445),y=t(446),b=t(422),v=t(432),N=t(427),S=t(139),P=t(2),C=function(e,a){return function(t){t({type:P.k,payload:{userName:e,password:a}}),t({type:P.a})}},A=function(e){return function(a){a({type:P.d,payload:{ipAddress:e}}),a({type:P.a})}},k=t(103),x=t(40),I=function(e){function a(e){var t;Object(n.a)(this,a),(t=Object(s.a)(this,Object(r.a)(a).call(this,e))).changeUserName=function(e){t.setState({username:e.target.value,connectionSuccess:!1})},t.changePassword=function(e){t.setState({password:e.target.value,connectionSuccess:!1})},t.changeIPAddress=function(e){t.setState({ipAddress:e.target.value,connectionSuccess:!1})},t.onSubmit=function(e){e.preventDefault();var a=t.state,n=a.ipAddress,c=a.username,s=a.password;Promise.all([C(c,s),A(n)]).then(function(){t.props.history.push("/dashboard")})},t.checkConnection=function(e){e.preventDefault();var a=t.state,n=a.ipAddress,c=a.username,s=a.password,r=t.props,o=r.changeUserNamePassword,l=r.changeIPAddress;Promise.all([o(c,s),l(n)]).then(function(){k.a.post("rc/noopauth").then(function(e){console.log("Connection successful."),t.setState({connectionSuccess:!0,error:""})},function(e){console.log(e),t.setState({connectionSuccess:!1,error:"Error connecting. Please check username password and verify if rclone is working at the specified IP."})})})};var c="http://localhost:5572/";return localStorage.getItem(x.b)&&(c=localStorage.getItem(x.b)),t.state={username:"",password:"",ipAddress:c,connectionSuccess:!1,error:""},t}return Object(o.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){localStorage.clear(),this.props.signOut()}},{key:"render",value:function(){var e=this.state,a=e.username,t=e.password,n=e.ipAddress,c=e.connectionSuccess,s=e.error;return i.a.createElement("div",{className:"app flex-row align-items-center","data-test":"loginComponent"},i.a.createElement(m.a,null,i.a.createElement(u.a,{className:"justify-content-center"},i.a.createElement(d.a,{md:"8"},i.a.createElement(p.a,null,i.a.createElement(h.a,{className:"p-4"},i.a.createElement(E.a,null,i.a.createElement(g.a,{onSubmit:this.onSubmit},i.a.createElement("h1",null,"Login"),i.a.createElement("p",{className:"text-muted"},"Sign In to your account"),s&&i.a.createElement(f.a,{color:"danger",children:s}),c&&i.a.createElement(f.a,{color:"success",children:"Connection verified. You may now login."}),i.a.createElement(w.a,{className:"mb-3"},i.a.createElement(y.a,{addonType:"prepend"},i.a.createElement(b.a,null,i.a.createElement("i",{className:"icon-user"}))),i.a.createElement(v.a,{type:"text",placeholder:"IP Address / URL",autoComplete:"ipAddress",onChange:this.changeIPAddress,value:n})),i.a.createElement(w.a,{className:"mb-3"},i.a.createElement(y.a,{addonType:"prepend"},i.a.createElement(b.a,null,i.a.createElement("i",{className:"icon-user"}))),i.a.createElement(v.a,{type:"text",placeholder:"Username",autoComplete:"username",onChange:this.changeUserName,value:a})),i.a.createElement(w.a,{className:"mb-4"},i.a.createElement(y.a,{addonType:"prepend"},i.a.createElement(b.a,null,i.a.createElement("i",{className:"icon-lock"}))),i.a.createElement(v.a,{type:"password",placeholder:"Password",autoComplete:"current-password",onChange:this.changePassword,value:t})),i.a.createElement(u.a,null,i.a.createElement(d.a,{xs:"6"},i.a.createElement(N.a,{color:"primary",className:"px-4",disabled:!c},"Login")),i.a.createElement(d.a,{xs:"6",className:"text-right"},i.a.createElement(N.a,{onClick:this.checkConnection,color:"primary",className:"px-4"},"Verify")))))),i.a.createElement(h.a,{className:"text-white bg-primary py-5 d-md-down-none",style:{width:"44%"}},i.a.createElement(E.a,{className:"text-center"},i.a.createElement("div",null))))))))}}]),a}(l.Component);a.default=Object(S.b)(null,{signOut:function(){return function(e){e({type:P.E})}},changeUserNamePassword:C,changeIPAddress:A})(I)}}]);
//# sourceMappingURL=4.48a3c06c.chunk.js.map